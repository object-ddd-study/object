# 역할, 책임, 협력

# 내용 요약

- 객체지향 설계의 핵심은 협력을 구성하기 위해 적절한 객체를 찾고 적절한 책임을 할당하는 과정에서 드러난다.

## 협력
- 협력이란 어떤 객체가 다른 객체에게 무엇인가를 요청하는 것 (메시지 전송)
- 메시지를 수신한 객체는 메서드를 실행해 요청에 응답하는데 이때 객체는 메시지를 처리할 방법을 스스로 선택한다
	- 자율적인 객체는 변경하기가 쉽다
- 협력이 객체의 행동을 결정하고, 행동은 객체의 상태를 결정한다. 

## 책임
- 객체 간 협력 이 정의되었다면 협력에 필요한 행동을 수행할 수 있는 객체를 찾는다. 협력에 참여하기 위해 객체가 수행하는 행동을 **책임** 이라고 한다. 
- 책임은 두 가지로 나뉜다
	- 하는 것 (doing)
		- 객체 생성, 계산 수행 등 스스로 하는 것
		- 다른 객체의 행동을 시작시키는 것
	- 아는 것 (knowing)
		- 사적인 정보
		- 관련된 객체가 무엇인지
- 객체에게 얼마나 적절한 책임을 할당하느냐가 설계의 전체적인 품질을 결정
- CRC card (Candidate, Responsibility, Collaborator) 
	- 79, 80p 참고

## 책임 할당
- 협력을 설계하는 출발점은 시스템이 사용자에게 제공하는 기능을 시스템이 담당할 하나의 책임으로 바라보는 것 
	- e.g. "예매하라" 는 이름의 메시지로 협력을 시작 (82p)
		- 예매하기 책임에 필요한 정보를 가장 잘 알고 있는 객체에게 이 책임을 할당
			- 예매하려면 "가격 계산" 이라는 메시지가 필요함... (중략)
- 객체지향 설계는 협력에 필요한 메시지를 찾고, 메시지에 적절한 객체를 선택하는 반복적인 과정을 통해 이뤄진다. 

## 역할
- 객체가 어떤 협력 안에서 수행하는 책임의 집합
- 실제로 협력을 모델링할 때는 특정 객체가 아니라 역할에게 책임을 할당
	- 단, 설계 초반부터 역할 - 객체를 명확히 구분하는 건 그다지 중요하지 않음. 설계를 하다보면 자연스럽게 분리된다.
- 역할이 필요한 이유
	- 유연하고 재사용 가능한 협력
		- e.g. DiscountPolicy / AmountDiscountPolicy, PercentDiscountPolicy
- 역할은 객체가 참여할 수 있는 일종의 슬롯
	- c.f. 연극 배역(역할) - 배우(객체) 비유

---
# 템플릿 정리

## 마음에 드는 문장 또는 중요하다고 생각한내용 
- 행동이 상태를 결정한다. 
	- 객체지향에 갓 입문한 사람들이 가장 쉽게 빠지는 실수는 객체의 행동이 아니라 상태에 초점을 맞추는 것이다. (데이터 주도 설계)
	- 상태는 단지 객체가 행동을 정상적으로 수행하기 위해 필요한 재료일 뿐이다.
	- 응집도가 높고, 결합도가 낮은 객체를 창조하려면 항상 "협력" 이라는 문맥 안에서 객체를 생각해야 한다.
		- 즉, 다른 객체에게 무엇을 제공해야 하고 다른 객체로부터 무엇을 얻어야 하는지를 고민하자.
		- 협력이 행동을 결정하고, 행동이 상태를 결정한다. 

## 이야기 해보고 싶은 내용

## 자신과 생각이 다른 내용
- 89p abstract class vs interface 
	- java 8, interface default method
	- 이제 둘의 차이는 "상태"의 유무?